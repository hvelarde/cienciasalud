<div id="news-media-wrapper" tal:define="viewlet_id viewlet/__name__;
                                        here_url context/@@plone_context_state/object_url;
                                        cols string:5;">
    <tal:media condition="viewlet/newsmedia/hasContainer"
        define="media context/media;
                img_keys media/keys;
                lines python: viewlet.imageRows(cols, img_keys);">
            
    <div id="newsmedia-nav" tal:condition="lines">
        <a class="prev browse left"></a>
        <div class="scrollable">
            <div class="items">
                <ul class="line" tal:repeat="line lines">
                <tal:row repeat="item line">
                <li class="imgwrap"><img src="img" tal:attributes="src string:$here_url/media/$item/thumb;  alt python: media[item].title" /></li>
                </tal:row>
                </ul>
            </div>
            <div class="visualClear"></div>
            <!--tal:content="string:VIEWLET: ${viewlet_id}"-->
        </div>
        <a class="next browse right"></a>
    </div>
    <script>
        // execute your scripts when the DOM is ready. this is mostly a good habit
        jQuery(function($) {

            // initialize scrollable
            $(".scrollable").scrollable();
            $('.items img[src]').prepOverlay({
                subtype: 'image',
                urlmatch: '/thumb$',
                urlreplace: '/large'
            });

        });
    </script>


    </tal:media>
</div>
            <div class="visualClear"></div>
